{
  "version": "2.0.0",
  "tasks": [
    {
      // 在编译前，预先删除 elf 文件，避免编译过程中发现 elf 无法删除而浪费编译时间
      "group": "build",
      "type": "shell",
      "label": "remove elf and cargo build",
      "command": "", // makes vscode happy about this config
      "windows": {
        "command": "pwsh.exe",
        "args": [
          "-Command",
          "Remove-Item ${workspaceFolder}/target/thumbv7em-none-eabihf/debug/${fileBasenameNoExtension}* ;",
          "Remove-Item ${workspaceFolder}/target/thumbv7em-none-eabihf/debug/deps/${fileBasenameNoExtension}* ;",
          "Remove-Item ${workspaceFolder}/target/thumbv7em-none-eabihf/debug/.cargo-lock ;",
          "cargo build --bin ${fileBasenameNoExtension}"
        ]
      }
    },
    {
      "group": "build",
      "type": "shell",
      "label": "cargo build current file",
      "command": "", // makes vscode happy about this config
      "linux": {
        "command": "bash",
        "args": [
          "-c",
          "cargo build --bin ${fileBasenameNoExtension}"
        ]
      }
    }
  ]
}
